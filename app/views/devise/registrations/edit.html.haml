= devise_error_messages!
= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f|
  %h2
    = t("edit_settings", default: "Edit settings")
  .field.w30
    = f.label :email, t("email", default: "Email")
    = f.email_field :email, :readonly => true
  .field.w30
    = f.label :current_password, t("current_password", default: "Current password")
    %p
      = t("need_current_password_to_confirm", default: "(we need your current password to confirm your changes)")
    = f.password_field :current_password
  .ux-collapsible.collapsed.w30{"data-on-expanded" => "box grey"}
    %span
      %a.fsettings{:href => "#"}
        = t("change_my_password", default: "Change my password")
    .ux-content
      .field.w30
        = f.label :password, t("new_password", default: "New password")
        %p
          = t("leave_blank_if_dont_want_to_change", default: "(leave blank if you don't want to change it)")
        = f.password_field :password
      .field.w30
        = f.label :password_confirmation, t("confirm_new_password", default: "Confirm new password")
        = f.password_field :password_confirmation
  .actions
    %button.white{:type => "submit"}
      = t("update", default: "Update")
    = link_to t("back", default: "Back"), :back
  %hr.w30/
  %p
    = link_to t("delete_my_account", default: "Delete my account"), registration_path(resource_name), :confirm => t("are_you_sure", default: "Are you sure?"), :method => :delete, :class => 'fdelete'
